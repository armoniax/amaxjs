declare global {
    interface Window {
        unisat?: any;
    }
}

import { isInMobileBrowser, type AdapterName } from '@amax/abstract-adapter';

export const unisatAdapterName = 'Unisat' as AdapterName<'Unisat'>;

export const unisatUrl = isInMobileBrowser()
    ? 'https://aplink.app/home'
    : 'https://chromewebstore.google.com/detail/armadillo/ahkbnfljhaifiikpkhnkeobchonbpjpb?hl=zh-CN&utm_source=ext_sidebar';

export const unisatIcon =
    'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPG1hc2sgaWQ9Im1hc2swXzIyMzVfMjcxNSIgc3R5bGU9Im1hc2stdHlwZTpsdW1pbmFuY2UiIG1hc2tVbml0cz0idXNlclNwYWNlT25Vc2UiIHg9IjQiIHk9IjEiIHdpZHRoPSIyNCIgaGVpZ2h0PSIzMCI+CjxwYXRoIGQ9Ik0yNy44NTA0IDFINC4xNTAzOVYzMUgyNy44NTA0VjFaIiBmaWxsPSJ3aGl0ZSIvPgo8L21hc2s+CjxnIG1hc2s9InVybCgjbWFzazBfMjIzNV8yNzE1KSI+CjxwYXRoIGQ9Ik0yMC44NjczIDMuNjk5NDJMMjcuMDcyMiA5Ljc5NjkyQzI3LjYwMDQgMTAuMzE0OCAyNy44NjA0IDEwLjgzODkgMjcuODUyMiAxMS4zNjdDMjcuODQ0IDExLjg5NTEgMjcuNjE2OCAxMi4zNzY1IDI3LjE3MjUgMTIuODEzMUMyNi43MDc4IDEzLjI3MDIgMjYuMjA2MyAxMy41MDE3IDI1LjY2OTkgMTMuNTExOUMyNS4xMzM2IDEzLjUyIDI0LjYwMTMgMTMuMjY0MSAyNC4wNzMxIDEyLjc0NjJMMTcuNzI2OSA2LjUxMDUxQzE3LjAwNjMgNS44MDE2NyAxNi4zMTAzIDUuMjk5OTYgMTUuNjQwOSA1LjAwNTQ0QzE0Ljk3MTQgNC43MTA5MyAxNC4yNjcyIDQuNjY0MjEgMTMuNTMwMiA0Ljg2NzMzQzEyLjc5MTIgNS4wNjg0MSAxMS45OTkgNS41ODYzNSAxMS4xNDk0IDYuNDE5MTFDOS45Nzg0MiA3LjU3MDc4IDkuNDE5NTIgOC42NTEzNCA5LjQ3Njg3IDkuNjYwODRDOS41MzQxNyAxMC42NzAzIDEwLjExNTYgMTEuNzE4NCAxMS4yMTkgMTIuODAxTDE3LjYxNjQgMTkuMDg5NEMxOC4xNTA3IDE5LjYxMzQgMTguNDEyNyAyMC4xMzc1IDE4LjQwNDUgMjAuNjU3NEMxOC4zOTYzIDIxLjE3OTQgMTguMTY3MSAyMS42NjA4IDE3LjcxNDYgMjIuMTA1NkMxNy4yNjQzIDIyLjU0ODQgMTYuNzY2OCAyMi43OCAxNi4yMjYzIDIyLjc5ODNDMTUuNjg1OSAyMi44MTY1IDE1LjE0NzUgMjIuNTYyNyAxNC42MTUyIDIyLjAzODZMOC40MTAyNyAxNS45NDExQzcuNDAxMDMgMTQuOTQ5OSA2LjY3MjIzIDE0LjAxMTUgNi4yMjM5MSAxMy4xMjU5QzUuNzc1NTggMTIuMjQwNCA1LjYwNzcxIDExLjIzOSA1LjcyNDQgMTAuMTIxOUM1LjgyODgxIDkuMTY1MjMgNi4xMzc5MiA4LjIzOTAzIDYuNjUzODEgNy4zNDEyOEM3LjE2NzY1IDYuNDQzNDggNy45MDQ2MyA1LjUyNTQyIDguODYwNjcgNC41ODVDOS45OTg4NyAzLjQ2NTg0IDExLjA4NTkgMi42MDg3IDEyLjEyMTggMi4wMTE1NEMxMy4xNTU2IDEuNDE0MzggMTQuMTU2NiAxLjA4MzMgMTUuMTIyOSAxLjAxNDI1QzE2LjA5MTIgMC45NDUxODcgMTcuMDQ1MiAxLjEzNjExIDE3Ljk4ODkgMS41ODcwM0MxOC45MzI3IDIuMDM3OTQgMTkuODkwOCAyLjc0MDcyIDIwLjg2NTIgMy42OTk0MkgyMC44NjczWiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzIyMzVfMjcxNSkiLz4KPHBhdGggZD0iTTExLjEzMzQgMjguMzAyOEw0LjkzMDU1IDIyLjIwNTNDNC40MDIzOCAyMS42ODUzIDQuMTQyMzkgMjEuMTYzMyA0LjE1MDU4IDIwLjYzNTNDNC4xNTg3NyAyMC4xMDcyIDQuMzg2IDE5LjYyNTggNC44MzAyNCAxOS4xODkxQzUuMjk0OTQgMTguNzMyMSA1Ljc5NjUgMTguNTAwNSA2LjMzMjg1IDE4LjQ5MDNDNi44NjkyMSAxOC40ODIyIDcuNDAxNDcgMTguNzM2MSA3LjkyOTY0IDE5LjI1NjFMMTQuMjczOCAyNS40OTE3QzE0Ljk5NjQgMjYuMjAwNiAxNS42OTA0IDI2LjcwMjMgMTYuMzU5OCAyNi45OTY4QzE3LjAyOTMgMjcuMjkxMyAxNy43MzM1IDI3LjMzNiAxOC40NzI1IDI3LjEzNDlDMTkuMjExNiAyNi45MzM4IDIwLjAwMzggMjYuNDE1OSAyMC44NTM0IDI1LjU4MTFDMjIuMDI0NCAyNC40Mjk0IDIyLjU4MzIgMjMuMzQ4OCAyMi41MjU5IDIyLjMzOTRDMjIuNDY4NiAyMS4zMjk5IDIxLjg4NzIgMjAuMjgxOCAyMC43ODM4IDE5LjE5NzJMMTcuMzc1MyAxNS44NzYzQzE2Ljg0MDkgMTUuMzUyMyAxNi41Nzg5IDE0LjgyODIgMTYuNTg3MSAxNC4zMDgzQzE2LjU5NTMgMTMuNzg2MyAxNi44MjQ1IDEzLjMwNDggMTcuMjc3IDEyLjg2QzE3LjcyNzQgMTIuNDE3MiAxOC4yMjQ4IDEyLjE4NTcgMTguNzY1MiAxMi4xNjc0QzE5LjMwNTcgMTIuMTQ5MSAxOS44NDQxIDEyLjQwMyAyMC4zNzY0IDEyLjkyNzFMMjMuNTkwNCAxNi4wNTcxQzI0LjU5OTcgMTcuMDQ4MiAyNS4zMjg1IDE3Ljk4NjYgMjUuNzc2OCAxOC44NzIyQzI2LjIyNTEgMTkuNzU3OCAyNi4zOTMgMjAuNzU5MSAyNi4yNzYzIDIxLjg3NjNDMjYuMTcxOSAyMi44MzI5IDI1Ljg2MjggMjMuNzU5MSAyNS4zNDY5IDI0LjY1NjlDMjQuODMzMSAyNS41NTQ3IDI0LjA5NjEgMjYuNDcyOCAyMy4xNCAyNy40MTMyQzIyLjAwMTggMjguNTMyMyAyMC45MTQ4IDI5LjM4OTUgMTkuODc4OSAyOS45ODY2QzE4Ljg0MyAzMC41ODM4IDE3Ljg0MiAzMC45MTY5IDE2Ljg3MzcgMzAuOTg2QzE1LjkwNTQgMzEuMDU1IDE0Ljk1MTQgMzAuODY0MSAxNC4wMDc3IDMwLjQxMzJDMTMuMDYzOSAyOS45NjIzIDEyLjEwNTggMjkuMjU5NSAxMS4xMzE0IDI4LjMwMDhMMTEuMTMzNCAyOC4zMDI4WiIgZmlsbD0idXJsKCNwYWludDFfbGluZWFyXzIyMzVfMjcxNSkiLz4KPHBhdGggZD0iTTE1LjAwMzEgMTIuNTY5N0MxNi4yNjE1IDEyLjU2OTcgMTcuMjgxNiAxMS41NTc1IDE3LjI4MTYgMTAuMzA5QzE3LjI4MTYgOS4wNjA0NyAxNi4yNjE1IDguMDQ4MzQgMTUuMDAzMSA4LjA0ODM0QzEzLjc0NDcgOC4wNDgzNCAxMi43MjQ2IDkuMDYwNDcgMTIuNzI0NiAxMC4zMDlDMTIuNzI0NiAxMS41NTc1IDEzLjc0NDcgMTIuNTY5NyAxNS4wMDMxIDEyLjU2OTdaIiBmaWxsPSJ1cmwoI3BhaW50Ml9yYWRpYWxfMjIzNV8yNzE1KSIvPgo8L2c+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMjIzNV8yNzE1IiB4MT0iMjYuMDUxNyIgeTE9IjcuMjUxODQiIHgyPSI2Ljg3MjM3IiB5Mj0iMTUuODQyNSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgo8c3RvcCBzdG9wLWNvbG9yPSIjMjAxQzFCIi8+CjxzdG9wIG9mZnNldD0iMC4zNiIgc3RvcC1jb2xvcj0iIzc3MzkwRCIvPgo8c3RvcCBvZmZzZXQ9IjAuNjciIHN0b3AtY29sb3I9IiNFQTgxMDEiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRjRCODUyIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhcl8yMjM1XzI3MTUiIHgxPSI2LjQ4MDUiIHkxPSIyNS4wMDE2IiB4Mj0iMjguNzM1MiIgeTI9IjE4LjMyNTkiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzFGMUQxQyIvPgo8c3RvcCBvZmZzZXQ9IjAuMzciIHN0b3AtY29sb3I9IiM3NzM5MEQiLz4KPHN0b3Agb2Zmc2V0PSIwLjY3IiBzdG9wLWNvbG9yPSIjRUE4MTAxIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0Y0RkI1MiIvPgo8L2xpbmVhckdyYWRpZW50Pgo8cmFkaWFsR3JhZGllbnQgaWQ9InBhaW50Ml9yYWRpYWxfMjIzNV8yNzE1IiBjeD0iMCIgY3k9IjAiIHI9IjEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKDE1LjAwMzEgMTAuMzExKSBzY2FsZSgyLjI3ODQ5IDIuMjYwNjYpIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0Y0Qjg1MiIvPgo8c3RvcCBvZmZzZXQ9IjAuMzMiIHN0b3AtY29sb3I9IiNFQTgxMDEiLz4KPHN0b3Agb2Zmc2V0PSIwLjY0IiBzdG9wLWNvbG9yPSIjNzczOTBEIi8+CjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzIxMUMxRCIvPgo8L3JhZGlhbEdyYWRpZW50Pgo8L2RlZnM+Cjwvc3ZnPgo=';

export function openUnisatWallet(): boolean {
    if (!supportUnisatWallet()) {
        window.location.href = unisatUrl;
        return true;
    }
    return false;
}

export function supportUnisatWallet(): boolean {
    return !!window.unisat;
}

export interface UnisatAdapterConfig {
    rpc?: string;
    walletProviderLocalStorageKey?: string;
    btcOwnerContract?: string;
    btcProxy?: string;
    checkTimeout?: number;
}
